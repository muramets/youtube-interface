# üí¨ AI Chat ‚Äî Feature Doc

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º—É–ª—å—Ç–∏—á–∞—Ç (–Ω–µ—Å–∫–æ–ª—å–∫–æ –±–µ—Å–µ–¥), —Å—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤, –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ –º–æ—Å—Ç—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** 4 –º–æ—Å—Ç–∞ –ø–µ—Ä–µ–¥–∞—é—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ –≤ —á–∞—Ç —á–µ—Ä–µ–∑ 4 —Å–ª–æ—Ç–∞ –≤ `appContextStore`:
- `playlist` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ —Å Home, Playlists, PlaylistDetail (–æ–±—â–∏–π hook `useSelectionContextBridge`)
- `traffic` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–µ source videos –∏–∑ Suggested Traffic —Ç–∞–±–ª–∏—Ü—ã (–Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `setSlot`)
- `canvas` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –Ω–æ–¥—ã –Ω–∞ Canvas (video, traffic-source, sticky-note, image, frame)
- `trends` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–µ competitor videos –∏–∑ Trends

–í–∏–¥–µ–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è **—Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏** (title, description, tags, views) ‚Üí —Ñ–æ—Ä–º–∏—Ä—É—é—Ç system prompt (~42K —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ 150 –≤–∏–¥–µ–æ).

**–ü–∞–º—è—Ç—å:** 4 —Å–ª–æ—è ‚Äî L1 persistent context, L2 per-message labels, L3 —Å–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏, L4 cross-conversation memory.

**–£–ø–æ–º–∏–Ω–∞–Ω–∏—è:** Gemini –ø–∏—à–µ—Ç "Video #3" ‚Üí regex –ø–∞—Ä—Å–∏—Ç ‚Üí –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π badge —Å tooltip.

**–ú–æ–¥–µ–ª–∏:** Gemini 3 Pro (default), 3 Flash, 2.5 Pro, 2.5 Flash ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—ã–µ –≤ UI.

---

## Roadmap

### –°—Ç–∞–¥–∏—è 1 ‚Äî MVP ‚úÖ
–ë–∞–∑–æ–≤—ã–π —á–∞—Ç, —Å—Ç—Ä–∏–º–∏–Ω–≥, –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π, –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏.
- [x] ChatPanel —Å SSE —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–º
- [x] –ú—É–ª—å—Ç–∏—á–∞—Ç (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –±–µ—Å–µ–¥)
- [x] –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ Gemini –≤ UI
- [x] –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [x] –û—Ç–ø—Ä–∞–≤–∫–∞ system prompt —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### –°—Ç–∞–¥–∏—è 2 ‚Äî Context Bridges ‚úÖ
–ú–æ—Å—Ç—ã —Å–≤—è–∑—ã–≤–∞—é—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —á–∞—Ç–æ–º. –í—ã–±—Ä–∞–ª –≤–∏–¥–µ–æ ‚Üí –æ–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —á–∞—Ç–µ.
- [x] Selection Bridge (Home, Playlists ‚Äî –æ–±—â–∏–π hook)
- [x] Canvas Bridge (Canvas selection ‚Üí —á–∞—Ç)
- [x] Trends Bridge (Competitor videos ‚Üí —á–∞—Ç)
- [x] Suggested Traffic Bridge (Traffic sources ‚Üí —á–∞—Ç)
- [x] Sticky behavior (—Å–Ω—è—Ç–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è –Ω–µ —É–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç)
- [x] Pause/resume bridges

### –°—Ç–∞–¥–∏—è 3 ‚Äî Memory System ‚úÖ
–ß–∞—Ç –ø–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ —Ä–∞–º–∫–∞—Ö –±–µ—Å–µ–¥—ã –∏ –º–µ–∂–¥—É –±–µ—Å–µ–¥–∞–º–∏.
- [x] L1: Persistent Context (–≤—Å–µ –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ –≤–∏–¥–µ–æ –≤ system prompt)
- [x] L2: Per-message labels (`[üìé Attached: Video "Autumn"]`)
- [x] L3: Summarization (—Å–∂–∞—Ç–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏)
- [x] L4: Conclude (–∫—Ä–æ—Å—Å-—á–∞—Ç –ø–∞–º—è—Ç—å ‚Äî –∏–Ω—Å–∞–π—Ç—ã –º–µ–∂–¥—É –±–µ—Å–µ–¥–∞–º–∏)

### –°—Ç–∞–¥–∏—è 4 ‚Äî Video Mentions ‚úÖ
Gemini —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–∏–¥–µ–æ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ badges.
- [x] Regex –ø–∞—Ä—Å–∏–Ω–≥ "Video #N", "Competitor #N", "Draft #N"
- [x] Tooltip —Å –æ–±–ª–æ–∂–∫–æ–π –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- [x] Contextual Fallback Resolution (–∞–≤—Ç–æ-–∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Ç–∏–ø–∞ –≤–∏–¥–µ–æ)
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –∏ Unicode ‚Üê YOU ARE HERE

### –°—Ç–∞–¥–∏—è 5 ‚Äî Function Calling (Tools)
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥:** —Å –æ–±—ã—á–Ω–æ–≥–æ `generateContentStream()` (text-in ‚Üí text-out) –Ω–∞ **agentic architecture** —Å Tools. –≠—Ç–æ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ ‚Äî Gemini –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å "—Ç–µ–∫—Å—Ç–æ–≤—ã–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º" –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **–∞–≥–µ–Ω—Ç–æ–º**, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ.

**–ß—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥–µ:**
- `gemini.ts`: –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `tools` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–π
- –ù–æ–≤—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏: Gemini –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `functionCall` ‚Üí —Å–µ—Ä–≤–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `functionResponse` ‚Üí Gemini –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç
- SSE-–ø—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è: –∫—Ä–æ–º–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö chunks –ø–æ—è–≤–ª—è—é—Ç—Å—è `toolCall` –∏ `thought` events

**–ß—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ:**
- Regex –ø–∞—Ä—Å–∏–Ω–≥ (`videoReferenceUtils.ts`) ‚Üí –∑–∞–º–µ–Ω—è–µ—Ç—Å—è structured mentions –∏–∑ `functionCall`
- –ù–æ–≤—ã–µ UI-–±–ª–æ–∫–∏ –≤ —Å—Ç—Ä–∏–º–µ: "ü§î –î—É–º–∞—é...", "üîç –ò—â—É...", "üìä –ù–∞–π–¥–µ–Ω–æ"
- –§–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π: `text` + `toolCalls[]`

**–ù–æ–≤—ã–µ Tools:**
- [ ] `mentionVideo(videoId)` ‚Äî structured —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤–º–µ—Å—Ç–æ regex
- [ ] `getVideoDetails(videoId)` ‚Äî Gemini –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –≤–∏–¥–µ–æ on-demand
- [ ] Thinking tokens ‚Äî –≤–∏–¥–∏–º—ã–π –ø—Ä–æ—Ü–µ—Å—Å –º—ã—à–ª–µ–Ω–∏—è –≤ —Å—Ç—Ä–∏–º–µ
- [ ] Tool call UI: "üîç –ò—â—É –≤ –±–∞–∑–µ...", "üìä –ù–∞–π–¥–µ–Ω–æ 3 –≤–∏–¥–µ–æ"
- [ ] Backward compatibility: regex fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### –°—Ç–∞–¥–∏—è 6 ‚Äî RAG + Vector Search
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥:** –æ—Ç ¬´–≤—Å—ë –≤ prompt¬ª –∫ ¬´ID –≤ prompt + –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ¬ª.

**–ö–∞–∫ —Å–µ–π—á–∞—Å (L1 Persistent Context):**
–ú–æ—Å—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç full data (title, description, tags, views) –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ ‚Üí –≤—Å—ë —Å–∫–ª–µ–∏–≤–∞–µ—Ç—Å—è –≤ Markdown ‚Üí 42K —Ç–æ–∫–µ–Ω–æ–≤ –≤ system prompt. –ß–µ–º –±–æ–ª—å—à–µ –≤–∏–¥–µ–æ, —Ç–µ–º –¥–æ—Ä–æ–∂–µ –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. Gemini –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–æ.

**–ö–∞–∫ –±—É–¥–µ—Ç:**
–ú–æ—Å—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç **—Ç–æ–ª—å–∫–æ ID + –∫—Ä–∞—Ç–∫–∏–π title**. Gemini –ø–æ–ª—É—á–∞–µ—Ç –ª—ë–≥–∫–∏–π –º–∞–Ω–∏—Ñ–µ—Å—Ç (~2K —Ç–æ–∫–µ–Ω–æ–≤): *"–ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–æ 150 –≤–∏–¥–µ–æ. –í—ã–∑–æ–≤–∏ `getVideoDetails(id)` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π."* –ö–æ–≥–¥–∞ Gemini –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Äî –æ–Ω–∞ —Å–∞–º–∞ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –±–∞–∑–µ —á–µ—Ä–µ–∑ Tool. –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤–∏–¥–µ–æ, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç `searchDatabase(query)`.

**–í–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–æ–±–ª–æ–∂–∫–∏):**
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã Gemini **–≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–ª–∞ –æ–±–ª–æ–∂–∫—É** –æ–±—Å—É–∂–¥–∞–µ–º–æ–≥–æ –≤–∏–¥–µ–æ. –î–≤–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞:
1. **Pre-compute:** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤–∏–¥–µ–æ ‚Üí Vision API –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±–ª–æ–∂–∫—É —Ç–µ–∫—Å—Ç–æ–º ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `thumbnailDescription` ‚Üí –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ vector embedding (–¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –≤–∏–∑—É–∞–ª—É)
2. **On-demand:** –∫–æ–≥–¥–∞ Gemini –≤—ã–∑—ã–≤–∞–µ—Ç `getVideoDetails(id)` ‚Üí –≤–º–µ—Å—Ç–µ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è URL –æ–±–ª–æ–∂–∫–∏ ‚Üí Gemini –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±–ª–æ–∂–∫—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑—ã:**
- [ ] Embedding API: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è vector embedding –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ (title + description + tags + thumbnailDescription)
- [ ] Firestore Vector Index –Ω–∞ –ø–æ–ª–µ `embedding`
- [ ] Vision API: batch-–æ–ø–∏—Å–∞–Ω–∏–µ –æ–±–ª–æ–∂–µ–∫ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤–∏–¥–µ–æ ($1-4 –Ω–∞ 10K)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±–ª–æ–∂–∫–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ
- [ ] `searchDatabase(query, filters)` ‚Äî —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–π –±–∞–∑–µ
- [ ] `getVideoDetails(id)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç thumbnail URL ‚Üí Gemini –≤–∏–¥–∏—Ç –æ–±–ª–æ–∂–∫—É

**–ß—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è –≤ bridges:**
Hooks –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ú–µ–Ω—è–µ—Ç—Å—è `persistentContextLayer.ts`: –≤–º–µ—Å—Ç–æ full Markdown ‚Üí lightweight manifest (ID + title).

### –°—Ç–∞–¥–∏—è 7 ‚Äî YouTube Research Agent
–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –±–∞–∑—ã –∏ –∏—Å—Å–ª–µ–¥—É–µ—Ç YouTube –ø–æ –∑–∞–ø—Ä–æ—Å—É.
- [ ] `searchYouTube(query)` ‚Äî –ø–æ–∏—Å–∫ –≤–∏–¥–µ–æ –Ω–∞ YouTube
- [ ] `analyzeChannel(channelId)` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –≤–∏–¥–µ–æ –∫–∞–Ω–∞–ª–∞ + –æ–±–ª–æ–∂–∫–∏
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫–≤–æ—Ç–µ: *"–≠—Ç–æ –∑–∞–π–º—ë—Ç 200 units –∏–∑ 8,400 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?"*
- [ ] –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ subscriberCount –∫–∞–Ω–∞–ª–∞
- [ ] Vision –∞–Ω–∞–ª–∏–∑ –æ–±–ª–æ–∂–µ–∫ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### üöÄ –°—Ç–∞–¥–∏—è 8 ‚Äî Production (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç)
**User flow:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —á–∞—Ç ‚Üí –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∑–Ω–∞–µ—Ç –í–°–Å –æ –µ–≥–æ –≤–∏–¥–µ–æ, —Ç—Ä–µ–Ω–¥–∞—Ö, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞—Ö. –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ ‚Äî —Ç–æ–ª—å–∫–æ ID, Gemini —Å–∞–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ. –ú–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å 500 –≤–∏–¥–µ–æ –∏–∑ Suggested Traffic –∏ –Ω–µ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ 500 –æ–ø–∏—Å–∞–Ω–∏–π ‚Äî Gemini –∑–∞–≥—Ä—É–∑–∏—Ç –Ω—É–∂–Ω—ã–µ –ø–æ –º–µ—Ä–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è.

*"–ö–∞–∫–∏–µ –≤–∏–¥–µ–æ —Å –ª–µ–±–µ–¥—è–º–∏ —Ä–∞–±–æ—Ç–∞–ª–∏ –≤ —Ñ–µ–≤—Ä–∞–ª–µ?"* ‚Üí Gemini –∏—â–µ—Ç –ø–æ –≤—Å–µ–π –±–∞–∑–µ —á–µ—Ä–µ–∑ Vector Search, –Ω–∞—Ö–æ–¥–∏—Ç, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±–ª–æ–∂–∫–∏, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–∑—É–∞–ª.

*"–ò—Å—Å–ª–µ–¥—É–π –∫–∞–Ω–∞–ª Little Joys"* ‚Üí Gemini —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç *"–≠—Ç–æ –∑–∞–π–º—ë—Ç 200 units, —É —Ç–µ–±—è 8,400"* ‚Üí –∏–¥—ë—Ç –≤ YouTube API ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π.

- [ ] –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç —Å thinking, Tools, Vector Search
- [ ] –ö–æ–Ω—Ç–µ–∫—Å—Ç = –≤—Å—è Firestore –±–∞–∑–∞, –º–æ—Å—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ ID
- [ ] Gemini –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏—Ç –æ–±–ª–æ–∂–∫—É –æ–±—Å—É–∂–¥–∞–µ–º–æ–≥–æ –≤–∏–¥–µ–æ
- [ ] YouTube Research —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∫–≤–æ—Ç—ã
- [ ] **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Agentic (Function Calling), Gemini 2.5 Flash (default) + 3 Pro (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
- [ ] **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$0.02/–∑–∞–ø—Ä–æ—Å (RAG) –≤–º–µ—Å—Ç–æ $0.49 (full context)
- [ ] **–•—Ä–∞–Ω–µ–Ω–∏–µ:** Firestore + Vector Index + thumbnailDescription + embeddings
- [ ] **API:** Gemini API, YouTube Data API, Embedding API (–±–µ—Å–ø–ª.), Vision API (–æ–ø–∏—Å–∞–Ω–∏–µ –æ–±–ª–æ–∂–µ–∫)

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∏—á–∏
- [Canvas](./canvas.md) ‚Äî Canvas Bridge –ø–µ—Ä–µ–¥–∞—ë—Ç selected nodes –≤ —á–∞—Ç
- [Trends](./trends.md) ‚Äî Trends Bridge –ø–µ—Ä–µ–¥–∞—ë—Ç competitor videos –≤ —á–∞—Ç
- [Video](./video.md) ‚Äî Selection Bridge –ø–µ—Ä–µ–¥–∞—ë—Ç selected videos –≤ —á–∞—Ç

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ—Ç–∫–∞ (–¥–ª—è –∞–≥–µ–Ω—Ç–∞)
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** `ChatPanel.tsx`, `ChatInput.tsx`, `ChatMessageList.tsx`, `ChatBubble.tsx`
**Chips:** `VideoCardChip.tsx`, `SuggestedTrafficChip.tsx`, `CanvasSelectionChip.tsx`
**Hooks:** `features/Chat/hooks/` (5 hooks)
**Utils:** `videoReferenceUtils.ts` (regex mentions ‚Äî –±—É–¥–µ—Ç –∑–∞–º–µ–Ω—ë–Ω Tools)
**Stores:** `appContextStore.ts` (4 —Å–ª–æ—Ç–∞: playlist, traffic, canvas, trends)
**Backend:** `functions/src/services/gemini.ts` (streaming), `memory.ts` (4 layers)
**Types:** `appContext.ts` (VideoCardContext, SuggestedTrafficContext, CanvasSelectionContext)
**Bridges:** useSelectionContextBridge (Home+Playlists), TrafficTab (traffic), useCanvasContextBridge, useTrendsContextBridge
